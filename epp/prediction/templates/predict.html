{% load custom_filters %}

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Employee Productivity Prediction</title>
    </head>
    <body>
        <h1>Employee Productivity Prediction</h1>

        <!-- Display error message -->
        {% if error_message %}
        <div style="color: red; font-weight: bold">{{ error_message }}</div>
        {% endif %}

        <form method="POST">
            {% csrf_token %}

            <!-- Numerical Features -->
            {% for feature in numerical_features %}
            <label for="{{ feature }}">{{ feature|title }}:</label>
            <input
                type="text"
                name="{{ feature }}"
                id="{{ feature }}"
                value="{{ input_data|get_item:feature }}"
                required
            /><br />
            {% endfor %}

            <!-- Categorical Features -->
            {% for feature, categories in categorical_features.items %}
            <label for="{{ feature }}">{{ feature|title }}:</label>
            <select name="{{ feature }}" id="{{ feature }}" required>
                <option value="">Select...</option>
                {% for category in categories %}
                <option
                    value="{{ category }}"
                    {%
                    if
                    input_data|get_item:feature=""
                    ="category"
                    %}selected{%
                    endif
                    %}
                >
                    {{ category }}
                </option>
                {% endfor %}</select
            ><br />
            {% endfor %}

            <button type="submit">Predict</button>
        </form>

        {% if predictions %}
        <h2>Predictions:</h2>
        <ul>
            {% for model, prediction in predictions.items %}
            <li>{{ model }}: {{ prediction }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    </body>
</html>
